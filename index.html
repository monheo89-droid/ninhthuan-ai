// Các đường dẫn Scene chính xác
const URL_VR = "https://tour.panoee.net/68972f4ba3c49352552578cd/68c2e05f65c1d76691a79f7c";
const URL_SHOP = "https://tour.panoee.net/68972f4ba3c49352552578cd/691b32dc061521c90def58cb";

// HÀM CHÍNH: Tự động dọn dẹp video và chuyển tab
function handleNavigation(mode) {
    // 1. Kiểm tra và xóa Video giới thiệu nếu nó đang hiển thị
    const intro = document.getElementById('intro-layer');
    if (intro) {
        const video = document.getElementById('v-intro');
        if (video) video.pause(); // Dừng âm thanh video
        intro.remove(); // Xóa sạch lớp phủ video khỏi màn hình
        
        // Hiện thanh điều hướng (vì mặc định ban đầu nó bị display: none)
        document.getElementById('main-nav').style.display = 'flex';
    }

    // 2. Thực hiện chuyển Tab như bình thường
    gotoTab(mode);
}

function gotoTab(mode) {
    const iframe = document.getElementById('main-iframe');
    const btnVr = document.getElementById('btn-vr');
    const btnShop = document.getElementById('btn-shop');

    btnVr.classList.remove('active');
    btnShop.classList.remove('active');

    if (mode === 'vr') {
        btnVr.classList.add('active');
        if (iframe.src !== URL_VR) {
            iframe.src = URL_VR;
        }
    } else {
        btnShop.classList.add('active');
        if (iframe.src !== URL_SHOP) {
            iframe.src = URL_SHOP;
        }
    }
}

// Gán sự kiện cho các nút bấm ngay khi trang web tải xong để đảm bảo nhạy
window.onload = function() {
    // Nếu bạn muốn mặc định tải sẵn 1 tab bên dưới lớp video để tránh màn hình đen:
    document.getElementById('main-iframe').src = URL_VR;
};
