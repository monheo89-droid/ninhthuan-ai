<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ninh Thu·∫≠n AI - S√†n Th∆∞∆°ng M·∫°i S·ªë 360</title>
    <style>
        :root { 
            --shopee: #ee4d2d;
            --primary: #ff9800; 
        }
        
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; font-family: 'Segoe UI', sans-serif; background: #000; }

        /* L·ªöP 1: TOUR PANOEE */
        #pano-frame {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            border: none; z-index: 1;
        }

        /* L·ªöP 2: N√öT GI·ªé H√ÄNG N·ªîI */
        .cart-float-btn {
            position: fixed; bottom: 30px; right: 30px; z-index: 100;
            width: 60px; height: 60px; background: var(--shopee); color: white;
            border: none; border-radius: 50%; cursor: pointer; font-size: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.4); display: flex; align-items: center; justify-content: center;
            transition: 0.3s;
        }
        .cart-float-btn:hover { transform: scale(1.1); }

        /* L·ªöP 3: GIAO DI·ªÜN C·ª¨A H√ÄNG (SIDEBAR) */
        #shop-overlay {
            position: fixed; inset: 0; background: rgba(0,0,0,0.5);
            z-index: 1000; display: none; backdrop-filter: blur(3px);
        }
        #shop-sidebar {
            position: absolute; right: 0; top: 0; width: 100%; max-width: 380px; height: 100%;
            background: #f4f4f4; box-shadow: -5px 0 15px rgba(0,0,0,0.3);
            display: flex; flex-direction: column; transition: 0.3s;
        }

        .shop-header { background: var(--shopee); color: white; padding: 20px; display: flex; justify-content: space-between; align-items: center; }
        .shop-list { flex: 1; overflow-y: auto; padding: 15px; }
        
        /* TH·∫∫ S·∫¢N PH·∫®M */
        .product-item {
            background: white; border-radius: 8px; padding: 12px; margin-bottom: 12px;
            display: flex; gap: 12px; align-items: center; border: 2px solid transparent;
        }
        .product-item.active-focus { border-color: var(--shopee); background: #fff5f2; }
        .product-item img { width: 80px; height: 80px; object-fit: cover; border-radius: 6px; }
        .product-info { flex: 1; }
        .product-info h4 { margin: 0 0 5px 0; font-size: 15px; color: #333; }
        .product-price { color: var(--shopee); font-weight: bold; font-size: 16px; }
        .btn-order { 
            background: var(--shopee); color: white; border: none; padding: 8px 12px; 
            border-radius: 4px; cursor: pointer; font-size: 13px; margin-top: 8px; width: 100%;
        }

        #loader { text-align: center; margin-top: 50px; color: #888; }
    </style>
</head>
<body>

    <iframe id="pano-frame" src="https://tour.panoee.net/68972f4ba3c49352552578cd/691b32dc061521c90def58cb"></iframe>

    <button class="cart-float-btn" onclick="openShop()">üõí</button>

    <div id="shop-overlay" onclick="closeShop(event)">
        <div id="shop-sidebar" onclick="event.stopPropagation()">
            <div class="shop-header">
                <h3 style="margin:0">Gian H√†ng Ninh Thu·∫≠n</h3>
                <span style="cursor:pointer; font-size:30px;" onclick="closeShopDirect()">&times;</span>
            </div>
            <div class="shop-list" id="shop-content">
                <div id="loader">ƒêang k·∫øt n·ªëi kho h√†ng...</div>
            </div>
        </div>
    </div>

    <script>
        // C·∫•u h√¨nh
        const API_URL = "https://script.google.com/macros/s/AKfycbyD5o6YcsMgL1Qw-tupdqER9EuwnZrCY1qEkWn30MWbmaqe1xFGjrKSE8bkIlkFZkpV/exec";
        const MY_ZALO = "0909559101"; // S·ªë ƒëi·ªán tho·∫°i c·ªßa b·∫°n

        // Nh·∫≠n l·ªánh t·ª´ Panoee Hotspot
        window.openShopFromTour = function(id) {
            openShop(id);
        };

        async function openShop(focusId = null) {
            document.getElementById('shop-overlay').style.display = 'block';
            const listArea = document.getElementById('shop-content');
            
            try {
                const res = await fetch(API_URL);
                const data = await res.json();
                
                listArea.innerHTML = ""; // X√≥a ch·ªØ loading
                
                data.forEach(item => {
                    const isFocus = (focusId && item.id == focusId);
                    listArea.innerHTML += `
                        <div class="product-item ${isFocus ? 'active-focus' : ''}" id="item-${item.id}">
                            <img src="${item.image}" alt="${item.name}">
                            <div class="product-info">
                                <h4>${item.name}</h4>
                                <div class="
