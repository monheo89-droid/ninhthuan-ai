<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ninh Thu·∫≠n Digital - Final Fix</title>
    <style>
        :root { --primary: #ff9800; --success: #27ae60; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; font-family: sans-serif; }

        /* THANH ƒêI·ªÄU H∆Ø·ªöNG C·ªê ƒê·ªäNH - ∆ØU TI√äN CAO NH·∫§T */
        #main-nav { 
            position: fixed; top: 20px; left: 20px; z-index: 99999; 
            display: flex; gap: 12px; pointer-events: auto;
        }
        .nav-btn { 
            width: 55px; height: 55px; border-radius: 50%; border: 3px solid white;
            background: white; font-size: 24px; cursor: pointer;
            display: flex; align-items: center; justify-content: center; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.6); transition: 0.2s;
        }
        .nav-btn.active { background: var(--primary) !important; color: white; transform: scale(1.1); }
        .nav-btn.shop-active { background: var(--success) !important; color: white; }

        /* CONTAINER TAB */
        .tab-content { position: absolute; top: 0; left: 0; width: 100%; height: 100%; visibility: hidden; z-index: 1; }
        .tab-content.active { visibility: visible; z-index: 10; }
        iframe { width: 100%; height: 100%; border: none; }

        /* L·ªöP PH·ª¶ VIDEO */
        #intro-layer { 
            position: fixed; top:0; left:0; width:100%; height:100%; 
            background: #000; z-index: 88888; display: flex; flex-direction: column; align-items: center; justify-content: center; 
        }

        /* MENU AI */
        #ai-side-menu { 
            position: fixed; top: 90px; left: 20px; z-index: 77777; 
            width: 260px; background: rgba(255,255,255,0.95); padding: 20px; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); display: none;
        }
        #ui-canvas { position: absolute; top: 0; left: 0; z-index: 500; pointer-events: none; }
    </style>
</head>
<body>

    <div id="intro-layer">
        <video id="v-intro" width="100%" autoplay muted playsinline loop>
            <source src="LINK_VIDEO_C·ª¶A_B·∫†N.mp4" type="video/mp4">
        </video>
        <button onclick="destroyIntro('vr')" style="margin-top:20px; padding:15px 40px; background:var(--primary); color:white; border:none; border-radius:30px; font-weight:bold; cursor:pointer; font-size:18px;">KH√ÅM PH√Å TOUR VR</button>
        <button onclick="destroyIntro('shop')" style="margin-top:10px; padding:10px 30px; background:var(--success); color:white; border:none; border-radius:30px; font-weight:bold; cursor:pointer;">V√ÄO GIAN H√ÄNG LU√îN üõí</button>
    </div>

    <div id="main-nav">
        <button class="nav-btn" onclick="toggleAIMenu()">‚ò∞</button>
        <button class="nav-btn active" id="btn-vr" onclick="changeTab('vr')">üìç</button>
        <button class="nav-btn" id="btn-shop" onclick="changeTab('shop')">üõí</button>
    </div>

    <div id="tab-vr" class="tab-content active">
        <iframe src="https://tour.panoee.net/68972f4ba3c49352552578cd/68c2e05f65c1d76691a79f7c"></iframe>
        <canvas id="ui-canvas"></canvas>
    </div>

    <div id="tab-shop" class="tab-content">
        <iframe src="https://tour.panoee.net/68972f4ba3c49352552578cd/68c2e05f65c1d76691a79f7c"></iframe>
    </div>

    <div id="ai-side-menu">
        <h3 style="margin:0 0 15px">Ninh Thu·∫≠n AI</h3>
        <button onclick="alert('Ch·ªçn ·∫£nh t·ª´ m√°y...')" style="width:100%; padding:12px; background:var(--primary); color:white; border:none; border-radius:10px; cursor:pointer; font-weight:bold;">üì∏ Ch·ª•p ·∫£nh ngay</button>
    </div>

    <script>
        // H√†m x√≥a b·ªè ho√†n to√†n Video ƒë·ªÉ gi·∫£i ph√≥ng b·ªô nh·ªõ v√† tr√°nh ƒë∆° n√∫t
        function destroyIntro(target) {
            const intro = document.getElementById('intro-layer');
            const video = document.getElementById('v-intro');
            if (video) video.pause();
            if (intro) intro.remove(); // X√ìA H·∫≤N KH·ªéI DOM
            
            changeTab(target); // Sau khi x√≥a th√¨ chuy·ªÉn tab
        }

        function changeTab(name) {
            // 1. Reset class cho Tab
            document.getElementById('tab-vr').classList.remove('active');
            document.getElementById('tab-shop').classList.remove('active');
            
            // 2. Reset class cho N√∫t
            document.getElementById('btn-vr').classList.remove('active');
            document.getElementById('btn-shop').classList.remove('active');
            document.getElementById('btn-shop').classList.remove('shop-active');

            // 3. K√≠ch ho·∫°t ƒë√∫ng Tab
            if(name === 'vr') {
                document.getElementById('tab-vr').classList.add('active');
                document.getElementById('btn-vr').classList.add('active');
                document.getElementById('ui-canvas').style.display = 'block';
            } else {
                document.getElementById('tab-shop').classList.add('active');
                document.getElementById('btn-shop').classList.add('shop-active');
                document.getElementById('ui-canvas').style.display = 'none';
                document.getElementById('ai-side-menu').style.display = 'none';
            }
        }

        function toggleAIMenu() {
            const menu = document.getElementById('ai-side-menu');
            menu.style.display = (menu.style.display === 'block') ? 'none' : 'block';
        }

        // T·ª± ƒë·ªông resize canvas
        window.onresize = () => {
            const cv = document.getElementById('ui-canvas');
            cv.width = window.innerWidth;
            cv.height = window.innerHeight;
        };
    </script>
</body>
</html>
